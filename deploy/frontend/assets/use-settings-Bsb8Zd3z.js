import{u as E}from"./useQuery-C6Oy5OYj.js";import{R as A}from"./chunk-NL6KNZEE-aMulfElY.js";import{d as T}from"./module-BG7DSedf.js";import{O as i}from"./open-hands-B3E073cv.js";import{u as c,a as o}from"./use-config-DZtddvT8.js";import{l as u}from"./open-hands-axios-BZ-FJWYr.js";const S=()=>{const{data:e}=c(),r=o(),s=e==null?void 0:e.APP_MODE;return E({queryKey:["user","authenticated",s],queryFn:async()=>{var _;try{return await i.authenticate(s),!0}catch(t){if(u.isAxiosError(t)&&((_=t.response)==null?void 0:_.status)===401)return!1;throw t}},enabled:!!s&&!r,staleTime:1e3*60*5,gcTime:1e3*60*15,retry:!1,meta:{disableToast:!0}})},I={LLM_MODEL:"anthropic/claude-sonnet-4-20250514",LLM_BASE_URL:"",AGENT:"CodeActAgent",LANGUAGE:"en",LLM_API_KEY_SET:!1,SEARCH_API_KEY_SET:!1,CONFIRMATION_MODE:!1,SECURITY_ANALYZER:"",REMOTE_RUNTIME_RESOURCE_FACTOR:1,PROVIDER_TOKENS_SET:{},ENABLE_DEFAULT_CONDENSER:!0,ENABLE_SOUND_NOTIFICATIONS:!1,USER_CONSENTS_TO_ANALYTICS:!1,ENABLE_PROACTIVE_CONVERSATION_STARTERS:!1,SEARCH_API_KEY:"",IS_NEW_USER:!0,MAX_BUDGET_PER_TASK:null,EMAIL:"",EMAIL_VERIFIED:!0,MCP_CONFIG:{sse_servers:[],stdio_servers:[]}},R=async()=>{const e=await i.getSettings();return{LLM_MODEL:e.llm_model,LLM_BASE_URL:e.llm_base_url,AGENT:e.agent,LANGUAGE:e.language,CONFIRMATION_MODE:e.confirmation_mode,SECURITY_ANALYZER:e.security_analyzer,LLM_API_KEY_SET:e.llm_api_key_set,SEARCH_API_KEY_SET:e.search_api_key_set,REMOTE_RUNTIME_RESOURCE_FACTOR:e.remote_runtime_resource_factor,PROVIDER_TOKENS_SET:e.provider_tokens_set,ENABLE_DEFAULT_CONDENSER:e.enable_default_condenser,ENABLE_SOUND_NOTIFICATIONS:e.enable_sound_notifications,ENABLE_PROACTIVE_CONVERSATION_STARTERS:e.enable_proactive_conversation_starters,USER_CONSENTS_TO_ANALYTICS:e.user_consents_to_analytics,SEARCH_API_KEY:e.search_api_key||"",MAX_BUDGET_PER_TASK:e.max_budget_per_task,EMAIL:e.email||"",EMAIL_VERIFIED:e.email_verified,MCP_CONFIG:e.mcp_config,IS_NEW_USER:!1}},m=()=>{var _,t;const e=o(),{data:r}=S(),s=E({queryKey:["settings"],queryFn:R,retry:(a,n)=>n.status!==404,refetchOnWindowFocus:!1,staleTime:1e3*60*5,gcTime:1e3*60*15,enabled:!e&&!!r,meta:{disableToast:!0}});return A.useEffect(()=>{var a;s.isFetched&&((a=s.data)!=null&&a.LLM_API_KEY_SET)&&T.capture("user_activated")},[(_=s.data)==null?void 0:_.LLM_API_KEY_SET,s.isFetched]),((t=s.error)==null?void 0:t.status)===404?{data:I,error:s.error,isError:s.isError,isLoading:s.isLoading,isFetching:s.isFetching,isFetched:s.isFetched,isSuccess:s.isSuccess,status:s.status,fetchStatus:s.fetchStatus,refetch:s.refetch}:s};export{I as D,S as a,m as u};
